# Shared fragments used across multiple components

fragment Fight on ReportFight {
  id
  name
  difficulty
  startTime
  endTime
  # Kill and encounter information
  kill
  encounterID
  originalEncounterID
  # Phase information
  lastPhase
  lastPhaseAsAbsoluteIndex
  lastPhaseIsIntermission
  # Participant information
  friendlyPlayers
  enemyPlayers
  bossPercentage
  # Bounding box for coordinate system
  boundingBox {
    minX
    maxX
    minY
    maxY
  }
  # Optional: NPC information if needed
  friendlyNPCs {
    gameID
    groupCount
    instanceCount
    petOwner
    id
  }
  enemyNPCs {
    gameID
    id
    groupCount
    instanceCount
  }
  maps {
    file
    id
    name
  }
  # Phase transition information for multi-phase fights
  phaseTransitions {
    id
    startTime
  }
  # Game zone information
  gameZone {
    id
    name
  }
  # Dungeon pull information for dungeon visualizations
  dungeonPulls {
    id
    name
    x
    y
    startTime
    endTime
    encounterID
    kill
    boundingBox {
      minX
      maxX
      minY
      maxY
    }
    maps {
      file
      id
      name
    }
  }
}

fragment ReportInfo on Report {
  code
  title
  startTime
  endTime
  # Zone information for the report
  zone {
    id
    name
    frozen
    expansion {
      id
      name
    }
    encounters {
      id
      name
    }
    difficulties {
      id
      name
      sizes
    }
  }
}

fragment Character on Character {
  id
  name
  displayName
  classID
}

fragment Event on ReportEventPaginator {
  data
  nextPageTimestamp
}

fragment ReportAbility on ReportAbility {
  gameID
  icon
  name
  type
}

fragment ReportActor on ReportActor {
  anonymous
  displayName
  gameID
  icon
  id
  name
  petOwner
  server
  subType
  type
}

fragment MasterData on ReportMasterData {
  abilities {
    ...ReportAbility
  }
  actors {
    ...ReportActor
  }
}

# OPTIMIZED: Players only - reduces payload by 50-70%
fragment OptimizedReportActor on ReportActor {
  displayName
  gameID
  id
  name
  server
  subType
  type
  # Removed icon field - not used in most UI components
}

fragment OptimizedMasterData on ReportMasterData {
  abilities {
    ...ReportAbility
  }
  actors(type: "Player") {
    ...OptimizedReportActor
  }
}
