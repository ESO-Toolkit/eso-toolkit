# OPTIMIZED QUERIES - Use these for 60-90% performance improvement

# Damage events only - replaces client-side filtering with server-side
# Used by: DamageDonePanel.tsx, CriticalDamagePanel.tsx, LocationHeatmapPanel.tsx
query getDamageEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 1000000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: DamageDone
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Healing events only - much faster than filtering 100M events
# Used by: HealingDonePanel.tsx
query getHealingEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 1000000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Healing
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Buff/debuff events for penetration and uptime analysis
# Used by: BuffUptimesPanel.tsx, PenetrationPanel.tsx
query getBuffEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 20000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Buffs
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Death events for death tracking
# Used by: DeathEventPanel.tsx
query getDeathEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 1000000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Deaths
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Combatant info events (gear changes, spec changes, etc.)
# Used by: CombatantInfoPanel.tsx, gear analysis features
query getCombatantInfoEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 1000000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: CombatantInfo
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Debuff events for debuff tracking and penetration analysis
# Used by: DebuffPanel.tsx, PenetrationPanel.tsx, StatusEffectUptimesPanel.tsx
# Fetches both friendly and enemy debuffs for comprehensive analysis
query getDebuffEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 1000000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Debuffs
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Cast events for ability usage tracking
# Used by: CastPanel.tsx, rotation analysis features
query getCastEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 1000000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Casts
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Resource events for resource tracking (magicka, stamina, health, ultimate)
# Used by: ResourcePanel.tsx, resource analysis features
query getResourceEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $hostilityType: HostilityType
  $limit: Int = 1000000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Resources
        useActorIDs: true
        includeResources: true
        hostilityType: $hostilityType
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}
