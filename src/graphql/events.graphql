# Event queries for all event-related components
# Used by: EventsPanel.tsx, DamageDonePanel.tsx, HealingDonePanel.tsx,
#          BuffUptimesPanel.tsx, DeathEventPanel.tsx, LocationHeatmapPanel.tsx,
#          CriticalDamagePanel.tsx, PenetrationPanel.tsx

# Original query with 100M limit - kept for backwards compatibility
query getReportEvents($code: String!, $startTime: Float, $endTime: Float, $fightIds: [Int]!) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        useActorIDs: true
        includeResources: true
        limit: 100000000
      ) {
        ...Event
      }
    }
  }
}

# OPTIMIZED QUERIES - Use these for 60-90% performance improvement

# Damage events only - replaces client-side filtering with server-side
# Used by: DamageDonePanel.tsx, CriticalDamagePanel.tsx, LocationHeatmapPanel.tsx
query getDamageEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $limit: Int = 50000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: DamageDone
        useActorIDs: true
        includeResources: false
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Healing events only - much faster than filtering 100M events
# Used by: HealingDonePanel.tsx
query getHealingEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $limit: Int = 50000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Healing
        useActorIDs: true
        includeResources: false
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Buff/debuff events for penetration and uptime analysis
# Used by: BuffUptimesPanel.tsx, PenetrationPanel.tsx
query getBuffEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $limit: Int = 30000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Buffs
        useActorIDs: true
        includeResources: false
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}

# Death events for death tracking
# Used by: DeathEventPanel.tsx
query getDeathEvents(
  $code: String!
  $startTime: Float
  $endTime: Float
  $fightIds: [Int]!
  $limit: Int = 10000
) {
  reportData {
    report(code: $code) {
      events(
        startTime: $startTime
        endTime: $endTime
        fightIDs: $fightIds
        dataType: Deaths
        useActorIDs: true
        includeResources: false
        limit: $limit
      ) {
        ...Event
      }
    }
  }
}
