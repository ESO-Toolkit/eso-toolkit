fragment Fight on ReportFight {
  id
  name
  difficulty
  startTime
  endTime
}

query getReportByCode($code: String!) {
  reportData {
    report(code: $code) {
      code
      startTime
      endTime
      title
      visibility
      zone {
        name
      }
      fights {
        ...Fight
      }
    }
  }
}

fragment Character on Character {
  id
  name
  displayName
  classID
}

query getCharactersForReport($code: String!) {
  reportData {
    report(code: $code) {
      rankedCharacters {
        ...Character
      }
    }
  }
}

query getPlayersForReport($code: String!, $fightIDs: [Int]) {
  reportData {
    report(code: $code) {
      playerDetails(includeCombatantInfo: true, fightIDs: $fightIDs)
    }
  }
}

fragment Event on ReportEventPaginator {
  data
  nextPageTimestamp
}

query getReportEvents($code: String!, $afterEventTimestamp: Float, $fightIds: [Int]!) {
  reportData {
    report(code: $code) {
      events(startTime: $afterEventTimestamp, fightIDs: $fightIds, useActorIDs: true) {
        ...Event
      }
    }
  }
}
